(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const n of A)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function q(A){const n={};return A.integrity&&(n.integrity=A.integrity),A.referrerPolicy&&(n.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?n.credentials="include":A.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(A){if(A.ep)return;A.ep=!0;const n=q(A);fetch(A.href,n)}})();let h=[];function oe(e){h=[...e]}function le(e,t,q){h=[];let s=t;for(;s!==0;){const A=Q(0,e.length-1),n=Q(0,e[0].length-1);!e[A][n].isBomb&&e[A][n]!==q&&(h.push({y:A,x:n}),e[A][n].setBomb(),s--)}}function R({y:e,x:t}){var s,A,n,o,f,c,m,r;return[(s=a[e-1])==null?void 0:s[t],(A=a[e-1])==null?void 0:A[t+1],(n=a[e])==null?void 0:n[t+1],(o=a[e+1])==null?void 0:o[t+1],(f=a[e+1])==null?void 0:f[t],(c=a[e+1])==null?void 0:c[t-1],(m=a[e])==null?void 0:m[t-1],(r=a[e-1])==null?void 0:r[t-1]]}function Q(e,t){return Math.floor(Math.random()*(t-e+1)+e)}let L=0;function ce(e){L=e}function K(e){const t=R(e.coords),q=t.filter(s=>s===1||(s==null?void 0:s.isBomb));t.filter(s=>s).forEach(s=>{!s.isBomb&&!s.isOpen&&q.length===0&&(s.open(),K(s))})}function W(){a.map(e=>{e.map(t=>{t.disableCell()})})}function M(e=!1){sessionStorage.setItem("saveField",JSON.stringify(!e&&a)),sessionStorage.setItem("bombsCells",JSON.stringify(!e&&(JSON.parse(sessionStorage.getItem("bombsCells"))||(h.length===0?!1:h))))}function re(){(JSON.parse(sessionStorage.getItem("bombsCells"))||h).map(({y:e,x:t})=>{a[e][t].open(!0)}),xe(),W(),M(!0)}function me(){L++,M(),a.length*a[0].length-L===JSON.parse(sessionStorage.getItem("bombsCells")).length&&(Oe(),W(),M(!0))}function i({tagName:e,classList:t,id:q,type:s,forAttr:A,value:n,name:o,checked:f,disabled:c,textContent:m,innerHTML:r}){const l=document.createElement(e);return t!==void 0&&l.classList.add(...t.filter(Boolean)),q!==void 0&&(l.id=q),s!==void 0&&(l.type=s),A!==void 0&&l.setAttribute("for",A),o!==void 0&&(l.name=o),n!==void 0&&l.setAttribute("value",n),f!==void 0&&(l.checked=f),c!==void 0&&(l.disabled=c),m!==void 0&&(l.textContent=m),r!==void 0&&(l.innerHTML=r),l}class de{constructor(t,q,s,A=!1){this.coords=t,this.isBomb=q,this.isOpen=s,this.isFlagged=A,this.clickHandler=this.handleCellClick.bind(this),this.contextmenuHandler=n=>{n.preventDefault();const o=n.target.textContent;this.isFlagged=!this.isFlagged,n.target.textContent=this.isOpen?o:this.setFlag()}}setBomb(){this.isBomb=!0}setFlag(){this.isFlagged?(this.cell.classList.add("flagged"),B(-1)):(this.cell.classList.remove("flagged"),B(1)),M()}setCellContent(){const t=R(this.coords);this.setDOMValue(t.filter(q=>q==null?void 0:q.isBomb).length)}setClass(t){switch(t.type){case"add":this.cell.classList.add(t.payload);break;case"remove":this.cell.classList.remove(t.payload);break;case"toggle":this.cell.classList.toggle(t.payload);break}}open(t=!1){L===0&&!JSON.parse(sessionStorage.getItem("bombsCells"))&&(Ae(),le(a,z,this)),this.cell.classList.add("open"),this.isOpen=!0,this.setCellContent(),this.isBomb||me(),t||K(this)}handleCellClick(){this.isFlagged||this.isOpen||(Ze(),this.isBomb?re():this.open())}setDOMValue(t){if(this.cell.classList.contains("open")){if(this.isBomb)return this.cell.classList.add("mine");this.cell.textContent=t||"",this.cell.classList.add(`value-${t}`)}}disableCell(){this.cell.removeEventListener("click",this.clickHandler),this.cell.removeEventListener("contextmenu",this.contextmenuHandler),this.setClass({type:"add",payload:"disabled"})}createCellOnField(){return this.cell=i({tagName:"div",classList:["cell"]}),this.isOpen&&this.open(),this.isFlagged&&this.setFlag(),this.cell.addEventListener("click",this.clickHandler),this.cell.addEventListener("contextmenu",this.contextmenuHandler),this.setCellContent(),this.cell}}const ue="./assets/lose-ac2f7890.mp3",ge="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAAIKABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzP////////////////////////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAV4AAAAAAAACCgiCRwiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAAA3IuTZVp4AQAAA0goAABGa01RFndAAgAADSDAAAAAACDQIjSJjSGiIaZVudPSfPid1mOKD3/T96zpuTQi1rAgAYQIEAHZASAMCAL+LeLmZbknCdlzc4DyJePu8N+/j3//pAePKe93jyJSlKf+kB5E1ndH7++8UpTNIlNZve+H8ccCAYBwEHYP/g+//tAAAB+AMOFQNQonNBxXM3p2MSigMR8aOPwyM5QwOaRVMwC6MjTsMwx4MJwuMHQ/FiWBgDGDgEmFABnEBgEKCj5hkSZqSA0zMeALgiMmkgAhbInXXOhGoKkncRYWSriM0ruP5ASeTgxtr8ebg/8RiecblfJicgRrTsyqLwE1Cga630GxqpymqUkfisMP7Koe1KZZJIS9/yeWasTG61LyEXcqav+N3U3LKaz2//40urmdPjDNS9FrNJv4xTWP79K+8etSnGV1/19NlN3q0uo0gAAwwISTDAnDh6YVGBmVLHnwaaKCohZJggItuYfZpQ/S0KlquCIuxqWp4JcZQQpVnO3nC25HK1sFEQ3I7Ei6iSt//uSZCCO9GdEUJdx4AAAAA0g4AABEa0tOi49MMAAADSAAAAErW2obWqtcmK7cxNMLxmVtletsS9mVyjSPoW/bSpgxXGDWFPAs+tZ9n4zNTOK/dYG8wt0zWvi1zr41rwPm+dy4zefWNZmmCoXXLH8PiEQaYyLBxOgqEU602zBQRMmSgWCaHMxJhzSQJj0vU2DE6pnZckkAUeGQYOBOHGSBkoLuznLBusKOs5UIyFRuVbK0qguBQpPjalqDqR5pEDzZMTJHjZnCrBX+yRJMiCrSdGSeChWfRTRuXq0M7TqpY1wzKN4suj6flTZ9TNyMb0uQKw6xSVqPQee+tWgsuoAjDwErArAqKgoaOBegsPGCUoCLEfzCuMMXEIFzl1wwtVScAGMHw4o4lr6dQuEqRywSUZFFH2+ZbeSOsR9VaYG48Sz19JNBvGjK3ECzPitrQ/Hle2pieDTtXjeNE1H715nD3Nt+FqMwRXTD3BlkxE3Fnbn186rGrmurZ8LX1S27yzVlG8KwABjbw9MQ+ky4dzNhbT2L9G/vEdompkCJnCasYADYf/7kmRSAAQqRc8NbeACAAANIKAAARrNMSY5zIAQAAA0gwAAAEApmE4mTCQZ9E5gYnKWM2I9Ad4cD71uFFy+5giMyUFXUymW1byIgADRXVXQhQVS1gCGpVbjKEh2h0AtWOhM2ZAutrUEVcO8yrxCUOUytbyD6316NVxSpiMpvWtdQSoqQWmCgCjTwObEWYp0LwW8/2P4zVa1VXdTI5OYzRChaz+Q9NuC0io5LAn9etED8day3ljWTmbyiRUTol0Yh6tn72P20iBXbeW25MM5Y1u1qweVKfw+UQg+FnUAm45iDD1EKQpciSiGq8L0JCXk3hNhxOZygkKhUTbFChQ6qhQs4sRE2EQqJpWhQobQkrOSal/6WRIpoRTqElQ5KUpeS0peMYy24oWcWRYsialiCtgorIZkFHYhXQVEMCmxULIb0V0FcFJMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+5JkYw/zRS+0jz0gAgAADSDgAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",fe="./assets/win-aa90c719.mp3",he="./assets/click-68a2d254.mp3";const H=i({tagName:"div",id:"app"}),P=i({tagName:"div",classList:["wrapper"]}),U=i({tagName:"div",classList:["menu"]}),v=JSON.parse(sessionStorage.getItem("timer")),I=i({tagName:"div",classList:["stopwatch","menu__text"],textContent:N(v||0)}),G=i({tagName:"div",classList:["menu__btn"]}),V=i({tagName:"div",classList:["menu__text"]}),g=i({tagName:"div",classList:["click-count"]}),O=i({tagName:"div",classList:["remaining-bombs"]}),Y=i({tagName:"div",classList:["option-box"]}),b=i({tagName:"div",classList:["modal-box","hidden"]}),C=i({tagName:"div",classList:["modal-box__content"],textContent:"Settings"}),j=i({tagName:"div",classList:["settings-btn","btn"],textContent:"Settings"}),X=i({tagName:"div",classList:["last-results-btn","btn"],textContent:"Results"});b.append(C);Y.append(b,j,X);const k=i({tagName:"div",classList:["game-modes"]}),pe=i({tagName:"span",classList:["game-mode","easy-mode"],textContent:"EASY"}),Se=i({tagName:"span",classList:["game-mode","medium-mode"],textContent:"MEDIUM"}),Ce=i({tagName:"span",classList:["game-mode","hard-mode"],textContent:"HARD"});k.append(pe,Se,Ce);k.addEventListener("click",be);let d=JSON.parse(sessionStorage.getItem("mode"))||"easy-mode";const _={"easy-mode":[10,10,10],"medium-mode":[15,15,40],"hard-mode":[25,25,99]};function be(e){e.target.classList.contains("easy-mode")&&(d="easy-mode"),e.target.classList.contains("medium-mode")&&(d="medium-mode"),e.target.classList.contains("hard-mode")&&(d="hard-mode"),sessionStorage.setItem("mode",JSON.stringify(d)),ie()}const x=i({tagName:"div",classList:["field"]});V.append(g,O);U.append(I,G,V);P.append(U,x);H.append(Y,k,P);document.body.append(H);j.addEventListener("click",e=>w(e,"settings"));X.addEventListener("click",e=>w(e,"results"));b.addEventListener("click",e=>w(e));const E=document.documentElement;let{soundIsOn:p,theme:S}=JSON.parse(localStorage.getItem("settings"))||{soundIsOn:!0,theme:"light"};const $=[{name:"Sound",className:["sound-setting-item"],options:[{text:"On",value:!0,className:[p?"active":""],handle:F},{text:"Off",value:!1,className:[p?"":"active"],handle:F}]},{name:"Theme",className:["theme-setting-item"],options:[{text:"Light",value:"light",className:[S==="light"?"active":""],handle:T},{text:"Dark",value:"dark",className:[S==="dark"?"active":""],handle:T}]}];let ee=te();function te(){var e;return(e=JSON.parse(localStorage.getItem("last-results")))==null?void 0:e.queue.map(t=>({name:t.mode,className:["last-results-item"],options:[{text:N(t.time),value:t.time,className:[]},{text:t.clicks,value:t.clicks,className:[]}]}))}S==="dark"&&E.style.setProperty("--main-color","#373737");function y(e){p&&e.play()}function F(e,t){e.getAttribute("value")==="true"&&(p=!0),e.getAttribute("value")==="false"&&(p=!1),se(e,t,"Sound")}function T(e,t){e.getAttribute("value")==="dark"&&(E.style.setProperty("--main-color","#373737"),S="dark"),e.getAttribute("value")==="light"&&(console.log("theme",e,t),E.style.setProperty("--main-color","#fff"),S="light"),se(e,t,"Theme")}function se(e,t,q){e.classList.add("active"),$.filter(s=>s.name===q)[0].options.map(s=>{s.text===e.textContent?s.className.push("active"):s.className.pop()});for(let s=1;s<t.length;s++)e!==t[s]&&t[s].classList.remove("active");localStorage.setItem("settings",JSON.stringify({soundIsOn:p,theme:S}))}function D(e,t){const q=i({tagName:"div",classList:["content-box-item",...t.className||""]}),s=i({tagName:"div",className:"option-title",textContent:t.name});t.options.forEach(A=>{const n=i({tagName:"div",classList:["option-item",...A.className||""],value:A.value,textContent:A.text});A.handle&&n.addEventListener("click",()=>{A.handle(n,q.children)}),q.append(n)}),q.prepend(s),e.append(q)}function w(e,t){e.target.classList.contains("modal-box")?b.classList.add("hidden"):(t==="settings"&&(C.innerHTML="",$.forEach(q=>D(C,q))),t==="results"&&(C.innerHTML="",ee.forEach(q=>D(C,q))),b.classList.remove("hidden"))}const Ne=new Audio(ue),Le=new Audio(fe),Me=new Audio(he),ve=new Audio(ge);function Oe(){y(Le),Ee({mode:d,time:u,clicks:g.textContent}),qe("win",`Hooray! You found all mines in ${u} seconds and ${g.textContent} moves!`)}function xe(){y(Ne),qe("lose","Game over. Try again")}class ye{constructor(t,q){this.maxSize=q,this.queue=t||[]}add(t){if(this.queue.unshift(t),this.maxSize<this.queue.length)return this.queue.pop()}getQueue(){return this.queue}}function Ee(e){const{maxSize:t,queue:q}=JSON.parse(localStorage.getItem("last-results"))||{maxSize:3,queue:[]},s=new ye(q,t);s.add(e),localStorage.setItem("last-results",JSON.stringify(s)),ee=te()}function qe(e,t){ne();const q=i({tagName:"div",classList:["message-box","hidden"]}),s=i({tagName:"div",classList:["message-box__text"]});q.append(s),q.classList.remove("hidden"),s.classList.add(e),s.textContent=t,x.prepend(q),sessionStorage.setItem("count-clicks",JSON.stringify(0)),sessionStorage.setItem("timer",JSON.stringify(0))}G.addEventListener("click",()=>ie());let u=v||0,Z=null;v&&Ae();function Ae(){Z=setInterval(()=>{u++,I.textContent=N(u),sessionStorage.setItem("timer",JSON.stringify(u))},1e3)}function ne(){clearInterval(Z),Z=null}function Ze(){y(Me);const e=+g.textContent+1;g.textContent=e,sessionStorage.setItem("count-clicks",JSON.stringify(e))}function B(e){y(ve),O.textContent=+O.textContent+e}let a=[],z=0;function N(e){const t=Math.floor(e/60).toString(),q=(e-+t*60).toString();return`${t.length===1?`0${t}`:t}:${q.length===1?`0${q}`:q}`}function ie(){ne(),x.innerHTML="",sessionStorage.setItem("saveField",JSON.stringify(!1)),sessionStorage.setItem("bombsCells",JSON.stringify(!1)),sessionStorage.setItem("count-clicks",JSON.stringify(0)),sessionStorage.setItem("timer",JSON.stringify(0)),u=0,a=[],z=0,oe([]),g.textContent=0,O.textContent=0,I.textContent=N(u),ce(0),ae(..._[d])}function ae(){const[e,t,q]=_[d];g.textContent=JSON.parse(sessionStorage.getItem("count-clicks"))||0,B(q),Be(e,t,q)}function Be(e,t,q){const s=JSON.parse(sessionStorage.getItem("saveField"));a=s||Array.from({length:t},()=>Array.from({length:e},()=>0)),z=q,a.map((A,n)=>{const o=i({tagName:"div",classList:["line-cells"]});x.append(o),A.map((f,c)=>{var r,l,J;const m=Ie({y:n,x:c},((r=s==null?void 0:s[n])==null?void 0:r[c].isBomb)||!1,((l=s==null?void 0:s[n])==null?void 0:l[c].isOpen)||!1,((J=s==null?void 0:s[n])==null?void 0:J[c].isFlagged)||!1);o.append(m)})})}function Ie({y:e,x:t},q,s,A){const n=new de({y:e,x:t},!!q,!!s,!!A);return a[e][t]=n,n.createCellOnField()}ae();
